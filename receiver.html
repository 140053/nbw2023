<!doctype html>
<html lang="en">
   <head>
      <!-- Required meta tags -->
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <!-- Bootstrap CSS -->
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
      <style>
         .wrapper {
         display: grid;
         grid-template-columns: repeat(3, 1fr);
         gap: 15px;
         }
      </style>
      <title>National Book Week 2023</title>
   </head>
   <body class="bdy"  style="background-color: lightgray">
      <div class="content" >
         <div class="container-fluid" >
            <div id="banner" class="row d-flex justify-content-center  ">
               <!-- BANNER -->
               <div class="col-12 text-center ">
                  <img height="900px" class="rounded mx-auto d-block" src="assets/banner.gif" alt="banner">                        
               </div>
               <!-- DAPAT ALAM MO  -->
               <div class="col-12 " >
                  <div class="container-fluid">
                     <div class="row ">
                        <div class="col-2  mx-auto " style="margin-top: 350px">
                           <div class="card text-center bg-success">
                              <div class="card-header text-center text-danger">
                                 <h2>Team</h2>
                              </div>
                              <div class="card-body">
                                 <h1 class="card-title text-center text-warning">Team A</h1>
                                 <p class="card-text h1 text-white"><u>100</u></p>
                              </div>
                           </div>
                        </div>
                        <div class="col-8 text-center " >
                           <div class="banner">
                              <div class="row ">
                                 <div class="col-3 text-center">
                                    <img height="250px" alt="h1" src="assets/h2.png" class="rounded mx-auto d-block m-0">
                                 </div>
                                 <div class="col-4">
                                    <img height="300px" class="rounded mx-auto d-block" src="assets/dap2.gif" alt="banner">
                                 </div>
                                 <div class="col-4 mt-4 ml-5">
                                    <img height="250px" src="assets/tem.png" class="rounded mx-auto d-block" alt="thema">
                                 </div>
                              </div>
                           </div>
                           <div class="  p-2 mt-3">
                              <div class="border rounded-lg rounded-pill border-success mt-3 " style="background-color: crimson">
                                 <h1 class="text-white p-3" >With supporting text below as a natural lead-in to additional content. Question Number 1?</h1>
                              </div>
                              <div class="answer wrapper mt-5">
                                 <div class="card">
                                    <div class="card-body">
                                       <h3>Question Number 1?</h3>
                                    </div>
                                 </div>
                                 <div class="card">
                                    <div class="card-body">
                                       <h3>Question Number 1?</h3>
                                    </div>
                                 </div>
                                 <div class="card">
                                    <div class="card-body">
                                       <h3>Question Number 1?</h3>
                                    </div>
                                 </div>
                                 <div class="card">
                                    <div class="card-body">
                                       <h3>Question Number 1?</h3>
                                    </div>
                                 </div>
                                 <div class="card">
                                    <div class="card-body">
                                       <h3>Question Number 1?</h3>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                        <div class="col-2 mx-auto"  style="margin-top: 350px">
                           <div class="card text-center bg-warning">
                              <div class="card-header text-center text-danger">
                                 <h2>Team</h2>
                              </div>
                              <div class="card-body">
                                 <h1 class="card-title text-center text-success">Team A</h1>
                                 <p class="card-text h1 text-white"><u>100</u></p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <!-- Question and Answer -->
               <div class="col-12 ">
                  <div class="container">
                      <div class="row d-flex justify-content-center">
                        <div class="col-12 text-center mt-4">
                            <h1>Question & Answer</h1>
                             <!-- https://codepen.io/sumeshkp18/pen/VGBPYg -->
                              <style>
                                 text {
                                 font-family: Helvetica, Arial, sans-serif;
                                 font-size: 25px;
                                 pointer-events: none;
                                 }
                                 #chart {
                                 position: absolute;
                                 width: 500px;
                                 height: 500px;
                                 top: 3;
                                 left: 0;
                                 }
                                 #question {
                                 position: absolute;
                                 width: 600px;
                                 height: 700px;
                                 top: 0;
                                 left: 720px;
                                 }
                                 #question h1 {
                                 font-size: 50px;
                                 font-weight: bold;
                                 font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
                                 position: absolute;
                                 padding: 0;
                                 margin: 0;
                                 top: 50%;
                                 -webkit-transform: translate(0, -50%);
                                 transform: translate(0, -50%);
                                 }
                              </style>
                              <div id="chart"></div>
                              <div id="question">
                                 <h1></h1>
                              </div>
                              <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
                              <script>
                                 var padding = { top: 20, right: 40, bottom: 0, left: 0 },
                                  w = 700 - padding.left - padding.right,
                                  h = 700 - padding.top - padding.bottom,
                                  r = Math.min(w, h) / 2,
                                  rotation = 0,
                                  oldrotation = 0,
                                  picked = 100000,
                                  oldpick = [],
                                  color = d3.scale.category20();

                                  var data = [
                                      {
                                        label: "Dell LAPTOP",
                                        value: 1,
                                        question:
                                          "What CSS property is used for specifying the area between the content and its border?"
                                      }, // padding
                                      {
                                        label: "IMAC PRO",
                                        value: 2,
                                        question: "What CSS property is used for changing the font?"
                                      }, //font-family
                                      {
                                        label: "SUZUKI",
                                        value: 3,
                                        question: "What CSS property is used for changing the color of text?"
                                      }, //color
                                      {
                                        label: "HONDA",
                                        value: 4,
                                        question: "What CSS property is used for changing the boldness of text?"
                                      }, //font-weight
                                      {
                                        label: "FERRARI",
                                        value: 5,
                                        question: "What CSS property is used for changing the size of text?"
                                      }, //font-size
                                      {
                                        label: "APARTMENT",
                                        value: 6,
                                        question:
                                          "What CSS property is used for changing the background color of a box?"
                                      }, //background-color
                                      {
                                        label: "IPAD PRO",
                                        value: 7,
                                        question:
                                          "Which word is used for specifying an HTML tag that is inside another tag?"
                                      }, //nesting
                                      {
                                        label: "LAND",
                                        value: 8,
                                        question:
                                          "Which side of the box is the third number in: margin:1px 1px 1px 1px; ?"
                                      }, //bottom
                                      {
                                        label: "MOTOROLLA",
                                        value: 9,
                                        question:
                                          "What are the fonts that don't have serifs at the ends of letters called?"
                                      }, //sans-serif
                                      {
                                        label: "BMW",
                                        value: 10,
                                        question:
                                          "With CSS selectors, what character prefix should one use to specify a class?"
                                      }
                                    ];
                                    var svg = d3
                                      .select("#chart")
                                      .append("svg")
                                      .data([data])
                                      .attr("width", w + padding.left + padding.right)
                                      .attr("height", h + padding.top + padding.bottom);
                                    var container = svg
                                      .append("g")
                                      .attr("class", "chartholder")
                                      .attr(
                                        "transform",
                                        "translate(" + (w / 2 + padding.left) + "," + (h / 2 + padding.top) + ")"
                                      );
                                    var vis = container.append("g");

                                    var pie = d3.layout
                                      .pie()
                                      .sort(null)
                                      .value(function (d) {
                                        return 1;
                                      });
                                    // declare an arc generator function
                                    var arc = d3.svg.arc().outerRadius(r);
                                    // select paths, use arc generator to draw
                                    var arcs = vis
                                      .selectAll("g.slice")
                                      .data(pie)
                                      .enter()
                                      .append("g")
                                      .attr("class", "slice");

                                    arcs
                                      .append("path")
                                      .attr("fill", function (d, i) {
                                        return color(i);
                                      })
                                      .attr("d", function (d) {
                                        return arc(d);
                                      });
                                    // add the text
                                    arcs
                                      .append("text")
                                      .attr("transform", function (d) {
                                        d.innerRadius = 0;
                                        d.outerRadius = r;
                                        d.angle = (d.startAngle + d.endAngle) / 2;
                                        return (
                                          "rotate(" +
                                          ((d.angle * 180) / Math.PI - 90) +
                                          ")translate(" +
                                          (d.outerRadius - 10) +
                                          ")"
                                        );
                                      })
                                      .attr("text-anchor", "end")
                                      .text(function (d, i) {
                                        return data[i].label;
                                      });
                                    container.on("click", spin);
                                    function spin(d) {
                                      container.on("click", null);
                                      //all slices have been seen, all done
                                      console.log("OldPick: " + oldpick.length, "Data length: " + data.length);
                                      if (oldpick.length == data.length) {
                                        console.log("done");
                                        container.on("click", null);
                                        return;
                                      }
                                      var ps = 360 / data.length,
                                        pieslice = Math.round(1440 / data.length),
                                        rng = Math.floor(Math.random() * 1440 + 360);

                                      rotation = Math.round(rng / ps) * ps;

                                      picked = Math.round(data.length - (rotation % 360) / ps);
                                      picked = picked >= data.length ? picked % data.length : picked;
                                      if (oldpick.indexOf(picked) !== -1) {
                                        d3.select(this).call(spin);
                                        return;
                                      } else {
                                        oldpick.push(picked);
                                      }
                                      rotation += 90 - Math.round(ps / 2);
                                      vis
                                        .transition()
                                        .duration(3000)
                                        .attrTween("transform", rotTween)
                                        .each("end", function () {
                                          //mark question as seen
                                          d3.select(".slice:nth-child(" + (picked + 1) + ") path").attr(
                                            "fill",
                                            "#111"
                                          );
                                          //populate question
                                          d3.select("#question h1").text(data[picked].question);
                                          oldrotation = rotation;

                                          /* Get the result value from object "data" */
                                          console.log(data[picked].value);

                                          /* Comment the below line for restrict spin to sngle time */
                                          container.on("click", spin);
                                        });
                                    }
                                    //make arrow
                                    svg
                                      .append("g")
                                      .attr(
                                        "transform",
                                        "translate(" +
                                          (w + padding.left + padding.right) +
                                          "," +
                                          (h / 2 + padding.top) +
                                          ")"
                                      )
                                      .append("path")
                                      .attr("d", "M-" + r * 0.15 + ",0L0," + r * 0.05 + "L0,-" + r * 0.05 + "Z")
                                      .style({ fill: "black" });
                                    //draw spin circle
                                    container
                                      .append("circle")
                                      .attr("cx", 0)
                                      .attr("cy", 0)
                                      .attr("r", 60)
                                      .style({ fill: "white", cursor: "pointer" });
                                    //spin text
                                    container
                                      .append("text")
                                      .attr("x", 0)
                                      .attr("y", 15)
                                      .attr("text-anchor", "middle")
                                      .text("SPIN")
                                      .style({ "font-weight": "bold", "font-size": "30px" });

                                    function rotTween(to) {
                                      var i = d3.interpolate(oldrotation % 360, rotation);
                                      return function (t) {
                                        return "rotate(" + i(t) + ")";
                                      };
                                    }

                                    function getRandomNumbers() {
                                      var array = new Uint16Array(1000);
                                      var scale = d3.scale.linear().range([360, 1440]).domain([0, 100000]);
                                      if (
                                        window.hasOwnProperty("crypto") &&
                                        typeof window.crypto.getRandomValues === "function"
                                      ) {
                                        window.crypto.getRandomValues(array);
                                        console.log("works");
                                      } else {
                                        //no support for crypto, get crappy random numbers
                                        for (var i = 0; i < 1000; i++) {
                                          array[i] = Math.floor(Math.random() * 100000) + 1;
                                        }
                                      }
                                      return array;
                                    }

                              </script>  
                        </div>
                      </div>
                  </div>
               </div>
               <!-- Sure Prize -->
               <div class="col-12 mt-5 text-center">
                   <h1>Sure Prize Jumble Word</h1>
               </div>
            </div>
         </div>
      </div>
      <ul id="messageList"></ul>
      <!-- FOOTER  -->
      <!-- jQuery first, then Popper.js, then Bootstrap JS -->
      <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js" integrity="sha384-+sLIOodYLS7CIrQpBjl+C7nPvqq+FbNUBDunl/OZv93DB7Ln/533i8e/mZXLi/P+" crossorigin="anonymous"></script>
      <script>
         const socket = new WebSocket('ws://localhost:3000');
         
         socket.onopen = () => {
           console.log('Connected to the server');
         };
         
         socket.onmessage = (event) => {
           const messageList = document.getElementById('messageList');
           const messageItem = document.createElement('li');
         
           if (typeof event.data === 'string') {
             try {
               const message = JSON.parse(event.data);
               messageItem.textContent = `Received: ${message.message}`;
             } catch (error) {
               messageItem.textContent = `Received: ${event.data}`;
             }
           } else if (event.data instanceof Blob) {
             // Handle Blob data
             const reader = new FileReader();
             reader.onload = function () {
               messageItem.textContent = `Received: ${reader.result}`;
               messageList.appendChild(messageItem);
             };
             reader.readAsText(event.data);
           } else {
             messageItem.textContent = `Received: ${event.data}`;
           }
         
           messageList.appendChild(messageItem);
         };
      </script>
      <!-- FOOTER -->   
   </body>
</html>